<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Describiendo sistemas con BDD &middot; </title>

  
  <link rel="stylesheet" href="http://adrianmoya.com/css/poole.css">
  <link rel="stylesheet" href="http://adrianmoya.com/css/hyde.css">
  <link rel="stylesheet" href="http://adrianmoya.com/css/poole-overrides.css">
  <link rel="stylesheet" href="http://adrianmoya.com/css/hyde-overrides.css">
  <link rel="stylesheet" href="http://adrianmoya.com/css/hyde-x.css">
  <link rel="stylesheet" href="http://adrianmoya.com/css/highlight/zenburn.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://adrianmoya.com/touch-icon-144-precomposed.png">
  <link href="http://adrianmoya.com/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-32342484-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body class="theme-base-0b">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <img src="https://www.gravatar.com/avatar/6d34a1145039fce454dea36c5464cf77?s=200"
             alt="gravatar" title="">
      
      <h1></h1>
      
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="http://adrianmoya.com/">Blog</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/adrianmoya/"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      <a href="https://www.linkedin.com/in/moyaadrian"><i class="fa fa-linkedin-square fa-3x"></i></a>
      
      
      <a href="http://www.twitter.com/adrianmoya"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="http://adrianmoya.com/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

    <p>Copyright &copy; 2013 <a href="http://adrianmoya.com/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1>Describiendo sistemas con BDD</h1>
    <span class="post-date">07/02/2013 &middot; Lectura de 8 minutos  &middot; <a href="http://adrianmoya.com/2013/02/describiendo-sistemas-con-bdd/#disqus_thread">Comentarios</a>

    
    <br/>
    <a class="label" href="http://adrianmoya.com/categories/agilidad">Agilidad</a><a class="label" href="http://adrianmoya.com/categories/bdd">BDD</a>
    </span>
    <p>Luego de mi <a href="/2013/01/introduccion-a-desarrollo-guiado-por-comportamiento-bdd/">Introducción a BDD</a>, quisiera comenzar a escribir acerca de BDD de historias, o Story BDD. Se trata de la parte de BDD que cubre las especificaciones de un sistema, expresadas en el lenguaje natural de nuestro cliente mediante características y escenarios.</p>
<h2 id="historias-o-características">¿Historias o características?</h2>
<p>Cuando usamos marcos de trabajos ágiles como Scrum, generalmente hablamos de historias de usuario. Pero ¿qué es la historia de usuario? básicamente es un requisito del sistema que estamos desarrollando, que puede ser muy general (épico en lenguaje ágil), o puede estar suficientemente granulado para representar una característica única del sistema. Cuando estamos planificando una iteración de desarrollo ágil, es de la segunda forma que queremos tener nuestras historias. Así, estamos asegurando que la iteración tendrá como resultado una característica completa del sistema y no un desarrollo a medias sin funcionalidad visible al cliente.</p>
<p>Cuando trabajamos en BDD de historias, el término comúnmente usado es característica, pero esta bien que pensemos en la misma como el equivalente de nuestra historia de Scrum típica que está lista para ser planificada, y hasta puede estar expresada en la forma convencional Como [rol]/Yo Quiero [funcionalidad]/Para que [valor de negocio].</p>
<h2 id="el-lenguaje-natural-del-cliente">El lenguaje natural del cliente</h2>
<p>Esta es una de esas dudas comunes que surgen cuando comienzas a trabajar describiendo historias en BDD. ¿Qué lenguaje debo usar para describir la característica? La respuesta es el lenguaje natural del cliente, por tanto debemos ponernos en sus zapatos y pensar si ellos pueden entender lo que escribimos. Por ejemplo, si es una persona del mundo de las inversiones, su lenguaje natural estará casado con su negocio, es decir, hablará de acciones, de inversión, de compra y venta, de valor de la acción, etc. Posiblemente el lenguaje no sea natural para nosotros y es nuestra tarea y la del equipo empaparse del lenguaje para poder comunicarse claramente con el cliente, y que él nos pueda expresar sus requisitos claramente.</p>
<p>Afortunadamente BDD nos ayudará a construir este lenguaje claro de comunicación utilizando unas simples técnicas que describiré a continuación. Pero qué pasa si desarrollamos servicios web para un banco? En este caso el lenguaje natural de nuestro cliente no son temas bancarios, pues los servicios están hechos para ser consumidos por desarrolladores en sus aplicaciones. En este caso el lenguaje gira en torno al endpoint, el payload (o cuerpo) de la petición, el xml o json de entrada y respuesta, las cabeceras de seguridad, etc. Es un lenguaje completamente distinto, pues dificilmente un gerente entenderá de servicios web. En este caso, quienes desarrollan la aplicación que consume los servicios pueden manejar el lenguaje del cliente final en su descripción de características.</p>
<h2 id="describiendo-la-característica-con-texto-informativo">Describiendo la característica con texto informativo</h2>
<p>La primera recomendación al momento de describir una característica es que incluyamos texto informativo que pueda ayudar a entender los escenarios y el objetivo de la característica. BDD nos permite incluir esta descripción y no nos limita con el formato. Utilizaré un ejemplo que vi hace poco en un <a href="http://vimeo.com/39660655">video</a> de <a href="http://blog.mattwynne.net/">Matt Wynne</a> que describe una característica muy común en los sistemas: el registro de usuario.</p>
<pre><code>Característica: Registro de usuario.

Como visitante
Yo quiero registrarme en el sistema
Para acceder a sus funciones

El registro funciona en tres etapas:
1. Solicitar el registro con un formulario en la página web. El solicitante recibe un correo.
2. Seguir un enlace de confirmación en el correo para activar la cuenta.
3. Llenar la información del perfil. En esta etapa el usuario ya tiene una cuenta pero tratamos de recolectar más información acerca de él.
</code></pre>
<p>Como podemos ver, con solo leer el texto queda bastante claro en que consiste el procedimiento en general, y no se ahonda en mucho detalle.</p>
<h2 id="agregando-los-escenarios-y-pasos">Agregando los escenarios y pasos</h2>
<p>Luego de la descripción, procedemos a expresar los distintos escenarios que pueden presentarse para el uso de esa característica. Aqui es importante que pensemos en los escenarios más comunes, la idea no es describir cada posible variación que pueda tener la característica si esto no agrega valor para describir el sistema. Cuando tengamos procedimientos que tienen múltiples etapas como el caso del ejemplo anterior, está bien poner cada etapa como un escenario separado. En general, queremos que cada escenario describa un comportamiento de la aplicación bajo unas condiciones dadas. El título del escenario es importante también y debe ser sencillo de distinguir de los otros escenarios.</p>
<p>Cada escenario lo describiremos en pasos, y lo ideal es que sean pocos pasos por escenario (3 idealmente, pero hasta 6 estará bien). Cualquier cosa más alla de 6 pasos pudiera sugerirnos que quizá podemos dividir el escenario en dos (O generalizar más el lenguaje). Lo ideal es que el documento que estamos escribiendo funcione como documentación del sistema, por tanto ser breves es importante, despues de todo ¡A nadie le gusta leer documentación muy larga!. Utilizamos la plantilla Dado/Cuando/Entonces para ir listando nuestros pasos en cada escenario.</p>
<pre><code>Característica: Registro de usuario.

Como visitante
Yo quiero registrarme en el sistema
Para acceder a sus funciones

El registro funciona en tres etapas:
1. Solicitar el registro con un formulario en la página web. El solicitante recibe un correo.
2. Seguir un enlace de confirmación en el correo para activar la cuenta.
3. Llenar la información del perfil. En esta etapa el usuario ya tiene una cuenta pero tratamos de recolectar más información acerca de él.

Escenario 1: Solicitar una cuenta
  Dado que no tengo una cuenta
  Cuando sigo el enlace de registro de la página de inicio
  Y lleno la forma con detalles válidos y la envío
  Entonces debo ver un mensaje de confirmación diciéndome que revise mi correo.

Escenario 2: Confirmar cuenta
  Dado que he solicitado una cuenta
  Y que he confirmado mi solicitud
  Cuando ingreso al sistema
  Entonces no debo ver un mensaje de que confirme mi cuenta
  Pero debo ver un mensaje de bienvenida
  Y debo ver un formulario pidiéndome que llene el perfil de mi cuenta

Escenario 3: Llenar el perfil de la cuenta
  Dado que he ingresado con una cuenta recién creada
  Cuando lleno los detalles de mi perfil
  Y salgo e ingreso al sistema nuevamente
  Entonces no debo ver el formulario pidiéndome llenar el perfil de mi cuenta
</code></pre>
<p>Es importante tomar en consideración lo siguiente: el nivel de granularidad con que describiremos nuestros escenarios debe ser entre alto y medio. Debemos generalizar algunos pasos para evitar que cambios futuros hagan que nuestros escenarios y pasos fallen, y que nuestras pruebas automatizadas se vuelvan difíciles de mantener. Este es quizá el aspecto que requiere mayor práctica en BDD de historias: conseguir la combinación de escenarios y el nivel de detalle ideal para describir el sistema sin que ahondemos en cosas superficiales o innecesarias. Del ejemplo podemos aprender algunas cosas:</p>
<ul>
<li>
<p>Del escenario 1 y 3, podemos notar que cuando se trata de llenar formularios, no estan especificando campos, y mucho menos valores o id&rsquo;s de elementos HTML. Esto es una buena práctica porque en caso de que se quiera agregar o eliminar algun campo de los datos que se deben introducir, los escenarios siguen siendo perfectamente válidos, haciendo que la mantenibilidad sea mínima. Esta técnica es útil con todo tipo de ingreso de información, asi que podemos tenerla en cuenta cuando vayamos a escribir un paso que requiere información del usuario. Noten además que habla de detalles válidos, y detalles de perfil. A medida que exploramos el dominio del cliente, podemos darle a esa información conjunta un nombre que nos ayude a ir construyendo este lenguaje común que nos permita evitar ambiguedades. Por ejemplo, podriamos llamarle datos de registro y datos del perfil.</p>
</li>
<li>
<p>Nótese tambien que en general los escenarios estan describiendo el camino &ldquo;feliz&rdquo; de la característica. Se pueden describir algunos caminos alternos que sean importantes, pero tambien usar la técnica usada en el escenario 2, donde yo afirmo haber confirmado la solicitud y describo que el comportamiento del sistema es que no me muestra el mensaje de confirmar la cuenta sino el de bienvenida. Puedieramos haber estado tentados de escribir un escenario diciendo que cuando entro al sistema sin confirmar mi solicitud, debo ver un mensaje de que confirme mi cuenta, pero habría esto agregado valor realmente? Esto es un caso alterno poco probable de que suceda, pues informamos al usuario que revisara su correo en el escenario 1. Introduciendo un paso &ldquo;negativo&rdquo; en el escenario del camino feliz (no debo ver), se puede inferir que el mensaje aparece si no he confirmado mi solicitud. Asi que enfoquemos nuestros escenarios a actividades que generan valor al cliente, y dejemos las excepciones que no sean importantes para validar que no sucedan en pasos del camino feliz.</p>
</li>
<li>
<p>Noten tambien que el texto exacto de los mensajes no esta en el escenario. Nuevamente es una técnica que ayuda a que la mantenibilidad de los escenarios sea mínima en el tiempo. Si desean cambiar el mensaje de confirmación de la cuenta a otra frase, o a una imagen, el escenario sigue siendo válido.</p>
</li>
<li>
<p>Finalmente noten que no hay detalles de interfaz de usuario, como colores, estilos, logos, etc. Estos detalles son irrelevantes en cuanto al comportamiento del sistema se refiere. Si el logo es el viejo o el nuevo, o la pagina tiene fondo azul, el sistema debería comportarse igual.</p>
</li>
</ul>
<p>Para el caso del ejemplo, el autor puso expresiones como &ldquo;seguir el enlace de registro&rdquo; y &ldquo;página de inicio&rdquo;, que nos indican que el sistema es web. Trabajando un poquito más estos escenarios, podriamos generalizar estos pasos a actividades en lenguaje de negocios como &ldquo;acceder al formulario de registro&rdquo;, y esta es una actividad más generalizada, en caso de que en un futuro cambiemos la manera de acceder, sustituyendo el enlace con un botón. Son detalles que podemos ir refinando a medida que trabajamos la aplicación y conocemos el negocio. La práctica nos hara mejorar día a día.</p>
<p>Para más ideas y tips referentes a como describir los escenarios, sugiero leer <a href="/2012/08/que-hay-en-una-historia/">¿Qué hay en una historia?</a>.</p>
<p>En el próximo post estaré tratando cómo automatizar la verificación del sistema, partiendo de los escenarios y pasos que hemos trabajado en este artículo.</p>
  </div>
  <div><span class='st_facebook_large' displayText='Facebook'></span>
    <span class='st_twitter_large' displayText='Tweet'></span>
    <span class='st_linkedin_large' displayText='LinkedIn'></span>
    <span class='st_googleplus_large' displayText='Google +'></span>
    <span class='st_sharethis_large' displayText='ShareThis'></span>
  </div>
  <div id="disqus_thread"></div>
</div>


<script type="text/javascript">
var disqus_shortname = "blogdeadrianmoya";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



<script type="text/javascript">
    var disqus_shortname = "blogdeadrianmoya";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script src="http://adrianmoya.com/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
  var _gaq=[['_setAccount','UA-32342484-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>

<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "0c419bc1-abc8-46e5-881e-16e6f73a9665", doNotHash: true, doNotCopy: true, hashAddressBar: true});</script>
</body>
</html>

